<%--
  Created by IntelliJ IDEA.
  User: NEUNB_Lisy
  Date: 2017/11/13
  Time: 15:18
  To change this template use File | Settings | File Templates.
--%>
<%@ page contentType="text/html;charset=UTF-8" language="java" %>
<html>
<head>
    <title>异步回调地址</title>
    <%@include file="common.jsp"%>
</head>
<body ng-app="app" ng-controller="ctrl">

</body>
<script>
var app = angular.module('app',[]).controller('ctrl',function ($scope) {
    var url = location.search; //获取url中"?"符后的字串
    var theRequest = new Object();
    if (url.indexOf("?") != -1) {
        var str = url.substr(1);
        strs = str.split("&");
        for(var i = 0; i < strs.length; i ++) {
            theRequest[strs[i].split("=")[0]]=(strs[i].split("=")[1]);
        }
    }
    console.log(theRequest);
    remotecallasync("alipay/getNotifyResultPay",theRequest,function (data) {
        if (data.verify_result){
            /*用户支付成功*/
        }else{
            /*用户支付失败，或验证失败*/
        }
    },function (data) {

    });
});
</script>
</html>
